#!/bin/bash

# Download all SRFI web archives from Simplelists.

set -e

export SIMPLELISTS_AUTH_COOKIE=<INSERT_COOKIE_HERE>

# I extracted the data for this list from the dropdown on the
# Simplelists > List Settings > Select list dropdown.

lists[44023]=schemecomm
lists[40839]=schemedoc
lists[43635]=schemepersist
lists[40711]=schemeweb
lists[13735]=srfi-0
lists[13813]=srfi-1
lists[13815]=srfi-2
lists[13823]=srfi-3
lists[13825]=srfi-4
lists[13827]=srfi-5
lists[13829]=srfi-6
lists[13831]=srfi-7
lists[13833]=srfi-8
lists[13835]=srfi-9
lists[13837]=srfi-10
lists[13839]=srfi-11
lists[13841]=srfi-12
lists[13843]=srfi-13
lists[13845]=srfi-14
lists[13847]=srfi-15
lists[13849]=srfi-16
lists[13851]=srfi-17
lists[13853]=srfi-18
lists[13855]=srfi-19
lists[13857]=srfi-20
lists[13859]=srfi-21
lists[13861]=srfi-22
lists[13863]=srfi-23
lists[13865]=srfi-24
lists[13867]=srfi-25
lists[13869]=srfi-26
lists[13871]=srfi-27
lists[13873]=srfi-28
lists[13875]=srfi-29
lists[13877]=srfi-30
lists[13879]=srfi-31
lists[13881]=srfi-32
lists[13883]=srfi-33
lists[13885]=srfi-34
lists[13887]=srfi-35
lists[13889]=srfi-36
lists[13891]=srfi-37
lists[13893]=srfi-38
lists[13895]=srfi-39
lists[13897]=srfi-40
lists[13899]=srfi-41
lists[13901]=srfi-42
lists[13903]=srfi-43
lists[13905]=srfi-44
lists[13907]=srfi-45
lists[13909]=srfi-46
lists[13911]=srfi-47
lists[13913]=srfi-48
lists[13915]=srfi-49
lists[13917]=srfi-50
lists[13919]=srfi-51
lists[13921]=srfi-52
lists[13923]=srfi-53
lists[13925]=srfi-54
lists[13927]=srfi-55
lists[13929]=srfi-56
lists[13931]=srfi-57
lists[13933]=srfi-58
lists[13935]=srfi-59
lists[13937]=srfi-60
lists[13939]=srfi-61
lists[13941]=srfi-62
lists[13943]=srfi-63
lists[13945]=srfi-64
lists[13947]=srfi-65
lists[13949]=srfi-66
lists[13951]=srfi-67
lists[13953]=srfi-68
lists[13955]=srfi-69
lists[13957]=srfi-70
lists[13959]=srfi-71
lists[13961]=srfi-72
lists[13963]=srfi-73
lists[13965]=srfi-74
lists[13967]=srfi-75
lists[13969]=srfi-76
lists[13971]=srfi-77
lists[13973]=srfi-78
lists[13975]=srfi-79
lists[13977]=srfi-80
lists[13979]=srfi-81
lists[13981]=srfi-82
lists[13983]=srfi-83
lists[13985]=srfi-84
lists[13987]=srfi-85
lists[13989]=srfi-86
lists[13991]=srfi-87
lists[13993]=srfi-88
lists[13995]=srfi-89
lists[13997]=srfi-90
lists[13999]=srfi-91
lists[14001]=srfi-92
lists[14003]=srfi-93
lists[14005]=srfi-94
lists[14007]=srfi-95
lists[14009]=srfi-96
lists[14011]=srfi-97
lists[14013]=srfi-98
lists[14015]=srfi-99
lists[14017]=srfi-100
lists[14019]=srfi-101
lists[14021]=srfi-102
lists[14023]=srfi-103
lists[14025]=srfi-104
lists[14027]=srfi-105
lists[14029]=srfi-106
lists[14031]=srfi-107
lists[14033]=srfi-108
lists[14035]=srfi-109
lists[14037]=srfi-110
lists[14039]=srfi-111
lists[14041]=srfi-112
lists[14043]=srfi-113
lists[14045]=srfi-114
lists[14047]=srfi-115
lists[14049]=srfi-116
lists[14051]=srfi-117
lists[14053]=srfi-118
lists[14055]=srfi-119
lists[14057]=srfi-120
lists[14059]=srfi-121
lists[15299]=srfi-122
lists[15499]=srfi-123
lists[15771]=srfi-124
lists[15777]=srfi-125
lists[15781]=srfi-126
lists[16753]=srfi-127
lists[17463]=srfi-128
lists[17941]=srfi-129
lists[17985]=srfi-130
lists[17999]=srfi-131
lists[18043]=srfi-132
lists[18079]=srfi-133
lists[18081]=srfi-134
lists[20057]=srfi-135
lists[20281]=srfi-136
lists[20433]=srfi-137
lists[20559]=srfi-138
lists[20577]=srfi-139
lists[20653]=srfi-140
lists[21241]=srfi-141
lists[21447]=srfi-142
lists[21449]=srfi-143
lists[21451]=srfi-144
lists[22997]=srfi-145
lists[22999]=srfi-146
lists[23079]=srfi-147
lists[23137]=srfi-148
lists[23139]=srfi-149
lists[23165]=srfi-150
lists[24685]=srfi-151
lists[25085]=srfi-152
lists[25413]=srfi-153
lists[25457]=srfi-154
lists[25465]=srfi-155
lists[25561]=srfi-156
lists[25633]=srfi-157
lists[25937]=srfi-158
lists[26029]=srfi-159
lists[35121]=srfi-160
lists[36607]=srfi-161
lists[36665]=srfi-162
lists[37765]=srfi-163
lists[37805]=srfi-164
lists[39919]=srfi-165
lists[40603]=srfi-166
lists[40815]=srfi-167
lists[40817]=srfi-168
lists[40819]=srfi-169
lists[41295]=srfi-170
lists[42231]=srfi-171
lists[42459]=srfi-172
lists[42843]=srfi-173
lists[43709]=srfi-174
lists[43745]=srfi-175
lists[44027]=srfi-176
lists[44167]=srfi-177
lists[13631]=srfi-announce
lists[13635]=srfi-auto-subscribe
lists[13133]=srfi-discuss
lists[13633]=srfi-editors
lists[42845]=stickers

for ml in "${!lists[@]}"; do
  echo $ml ':' "${lists[$ml]}"
  curl \
    "https://www.simplelists.com/members/listsettings.php?download=$ml" \
    -H 'SRFI archive fetch client' \
    -H 'Accept-Encoding: gzip, deflate, br' \
    -H 'Accept-Language: en-US,en;q=0.9' \
    -H "Cookie: SL_WEBADMIN=${SIMPLELISTS_AUTH_COOKIE}" \
    --compressed \
    >$dl/simplelists/${lists[$ml]}.mbox
  sleep 5
done
